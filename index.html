<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polo Fashions - Digital Bill</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .bill-preview {
            position: sticky;
            top: 20px;
            height: fit-content;
        }

        .card-bill {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border-radius: 15px;
        }

        .bill-border {
            border: 3px solid #1e3a8a; /* Blue-900 border */
            padding: 15px;
            border-radius: 10px;
            background-color: white; /* Ensure white background */
        }

        .name-card, .address-card {
            background: white; 
            border: 3px solid #1e3a8a;
        }
        
        .text-red-600-modified {
            color: #1e3a8a; /* Dark Blue for balance */
            font-weight: 700;
        }
        
        /* Status Toggle Styling */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 120px;
            height: 34px;
            user-select: none;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ef4444; /* Pending (Red-500) */
            transition: 0.4s;
            border-radius: 34px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
        }

        .slider:before {
            position: absolute;
            content: "Pending";
            height: 26px;
            width: 55px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 10px;
            color: #ef4444;
        }

        input:checked + .slider {
            background-color: #10b981; /* Delivered (Emerald-500) */
        }

        input:checked + .slider:before {
            transform: translateX(53px);
            content: "Delivered";
            color: #10b981;
        }

        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .app-container {
                grid-template-columns: 1fr;
            }

            .bill-preview {
                position: relative;
                top: 0;
            }
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect, useMemo } = React;

        // Simple icon components
        const Download = ({ size = 24 }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" /></svg>);
        const Share2 = ({ size = 24 }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="18" cy="5" r="3" /><circle cx="6" cy="12" r="3" /><circle cx="18" cy="19" r="3" /><line x1="8.59" y1="13.51" x2="15.42" y2="17.49" /><line x1="15.41" y1="6.51" x2="8.59" y2="10.49" /></svg>);
        const MessageSquare = ({ size = 24 }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" /></svg>);
        const Plus = ({ size = 24 }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>);
        const Trash2 = ({ size = 24 }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="3 6 5 6 21 6" /><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /></svg>);
        const Search = ({ size = 24 }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" /></svg>);
        const Clock = ({ size = 24 }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10" /><polyline points="12 6 12 12 16 14" /></svg>);
        const Home = ({ size = 24 }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" /><polyline points="9 22 9 12 15 12 15 22" /></svg>);

        // --- Utility Functions ---

        // Helper to retrieve all bills
        const getBillHistory = () => {
            const history = localStorage.getItem('billHistory');
            return history ? JSON.parse(history) : [];
        };

        // Helper to save a new bill record
        const saveBillToHistory = (billData) => {
            const history = getBillHistory();
            const newBill = {
                id: Date.now(),
                date: billData.date,
                cardNumber: billData.cardNumber || 'N/A',
                phoneNumber: billData.phoneNumber || 'N/A',
                readyDate: billData.readyDate || 'N/A',
                total: billData.total,
                advance: billData.advance,
                balance: billData.balance,
                status: 'Pending',
                timestamp: new Date().toLocaleString()
            };
            history.unshift(newBill);
            localStorage.setItem('billHistory', JSON.stringify(history));
            return newBill;
        };
        
        // Helper to save Card Number against Phone Number (for lookup)
        const saveCustomerCardNumber = (phoneNumber, cardNumber) => {
             const phone = phoneNumber.replace(/\D/g, '');
             if (phone.length === 10 && cardNumber) {
                 localStorage.setItem(`customerCard_${phone}`, cardNumber);
             }
        };

        // Helper to retrieve Card Number by Phone Number
        const loadCustomerCardNumber = (phoneNumber) => {
             const phone = phoneNumber.replace(/\D/g, '');
             if (phone.length === 10) {
                 return localStorage.getItem(`customerCard_${phone}`);
             }
             return null;
        };


        // --- BillHistory Component ---
        function BillHistory({ setPage }) {
            const [history, setHistory] = useState([]);
            const [searchTerm, setSearchTerm] = useState('');
            
            useEffect(() => {
                const storedHistory = getBillHistory().map(bill => ({
                    ...bill,
                    status: bill.status || 'Pending' 
                }));
                setHistory(storedHistory);
            }, []);

            // Function to update the status of a specific bill
            const toggleStatus = (id) => {
                const updatedHistory = history.map(bill => {
                    if (bill.id === id) {
                        return { 
                            ...bill, 
                            status: bill.status === 'Pending' ? 'Delivered' : 'Pending' 
                        };
                    }
                    return bill;
                });

                setHistory(updatedHistory);
                localStorage.setItem('billHistory', JSON.stringify(updatedHistory));
            };
            
            // Filter the history based on the search term (Card Number or Phone Number)
            const filteredHistory = useMemo(() => {
                if (!searchTerm) return history;
                const lowerCaseSearch = searchTerm.toLowerCase();
                return history.filter(bill => 
                    String(bill.cardNumber).toLowerCase().includes(lowerCaseSearch) ||
                    String(bill.phoneNumber).toLowerCase().includes(lowerCaseSearch)
                );
            }, [history, searchTerm]);

            return (
                <div className="card p-8 col-span-2">
                    <h1 className="text-3xl font-bold text-center mb-6 text-blue-900 flex items-center justify-center gap-3">
                        <Clock size={36} /> Bill History
                    </h1>
                    <div className="flex justify-between items-center mb-6 flex-wrap gap-4">
                        <button
                            onClick={() => setPage('home')}
                            className="bg-blue-600 text-white py-2 px-4 rounded-xl text-lg font-bold hover:bg-blue-700 flex items-center gap-2"
                        >
                            <Home size={24} /> Back to Home
                        </button>
                        
                        <div className="flex items-center gap-2 flex-grow max-w-lg ml-auto">
                            <input
                                type="text"
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                                className="flex-grow text-xl p-3 border-2 border-blue-500 rounded-lg"
                                placeholder="Search by Card No. or Phone No..."
                            />
                            <button
                                onClick={() => setSearchTerm(searchTerm)}
                                className="bg-blue-500 text-white p-3 rounded-lg flex items-center justify-center hover:bg-blue-600"
                            >
                                <Search size={24} />
                            </button>
                        </div>
                        
                        {/* THE CLEAR HISTORY BUTTON HAS BEEN REMOVED FROM HERE */}
                    </div>

                    {filteredHistory.length === 0 ? (
                        <div className="text-center p-10 bg-gray-50 rounded-xl text-gray-600 text-xl font-semibold">
                            {searchTerm ? `No matching bills found for "${searchTerm}"` : 'No bills found in history.'}
                        </div>
                    ) : (
                        <div className="overflow-x-auto">
                            <table className="min-w-full bg-white border border-gray-200">
                                <thead className="bg-blue-100">
                                    <tr>
                                        <th className="py-3 px-4 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-600">Time Saved</th>
                                        <th className="py-3 px-4 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-600">Card No.</th>
                                        <th className="py-3 px-4 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-600">Phone</th>
                                        <th className="py-3 px-4 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-600">Ready Date</th>
                                        <th className="py-3 px-4 border-b-2 border-gray-200 text-right text-sm font-semibold text-gray-600">Balance (‚Çπ)</th>
                                        <th className="py-3 px-4 border-b-2 border-gray-200 text-center text-sm font-semibold text-gray-600">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {filteredHistory.map((bill) => (
                                        <tr key={bill.id} className="hover:bg-gray-50">
                                            <td className="py-3 px-4 border-b border-gray-200 text-sm">{bill.timestamp.split(', ')[1]}<br/>{bill.timestamp.split(', ')[0]}</td>
                                            <td className="py-3 px-4 border-b border-gray-200 text-sm font-semibold text-blue-800">{bill.cardNumber}</td>
                                            <td className="py-3 px-4 border-b border-gray-200 text-sm">{bill.phoneNumber}</td>
                                            <td className="py-3 px-4 border-b border-gray-200 text-sm text-red-600">{bill.readyDate}</td>
                                            <td className="py-3 px-4 border-b border-gray-200 text-right text-sm font-bold text-red-600">{bill.balance.toFixed(0)}</td>
                                            {/* Status Toggle Cell */}
                                            <td className="py-3 px-4 border-b border-gray-200 text-center">
                                                <label className="toggle-switch">
                                                    <input 
                                                        type="checkbox" 
                                                        checked={bill.status === 'Delivered'} 
                                                        onChange={() => toggleStatus(bill.id)}
                                                    />
                                                    <span className="slider round"></span>
                                                </label>
                                            </td>
                                            {/* End Status Toggle Cell */}
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    )}
                </div>
            );
        }
        
        // --- PoloFashionsBill Component (The Home Page) ---
        function PoloFashionsBill({ setPage }) {
            const [readyDate, setReadyDate] = useState('');
            const [cardNumber, setCardNumber] = useState('');
            const [phoneNumber, setPhoneNumber] = useState('');
            const [date, setDate] = useState(new Date().toISOString().split('T')[0]);
            const [items, setItems] = useState([{ shirts: '', pants: '', amount: '' }]);
            const [advance, setAdvance] = useState('');
            const billRef = useRef(null);

            // --- Customer Lookup Function ---
            const searchCustomerCard = () => {
                if (!phoneNumber || phoneNumber.length < 10) {
                    alert('Please enter a valid 10-digit phone number to search.');
                    return;
                }
                const storedCardNumber = loadCustomerCardNumber(phoneNumber);
                if (storedCardNumber) {
                    setCardNumber(storedCardNumber);
                    alert(`Card Number found for ${phoneNumber}: ${storedCardNumber}`);
                } else {
                    setCardNumber(''); // Clear card number if not found
                    alert(`No previous Card Number found for ${phoneNumber}.`);
                }
            };
            
            // --- Calculation Functions (remain the same) ---
            const calculateTotal = () => {
                return items.reduce((sum, item) => sum + (parseFloat(item.amount) || 0), 0);
            };

            const calculateBalance = () => {
                const total = calculateTotal();
                const adv = parseFloat(advance) || 0;
                return total - adv;
            };
            
            // --- Item Functions (remain the same) ---
            const addItem = () => {
                setItems([...items, { shirts: '', pants: '', amount: '' }]);
            };

            const removeItem = (index) => {
                if (items.length > 1) {
                    setItems(items.filter((_, i) => i !== index));
                }
            };

            const updateItem = (index, field, value) => {
                const newItems = [...items];
                newItems[index][field] = value;
                setItems(newItems);
            };

            // --- Action Handlers ---
            const generateBillData = () => ({
                readyDate,
                cardNumber,
                phoneNumber,
                date,
                items,
                total: calculateTotal(),
                advance: parseFloat(advance) || 0,
                balance: calculateBalance()
            });
            
            // Downloads the bill image
            const downloadBillImage = async () => {
                const element = billRef.current;
                const canvas = await html2canvas(element, { scale: 2, backgroundColor: '#ffffff', logging: false });

                return new Promise((resolve) => {
                    canvas.toBlob((blob) => {
                        const url = URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.href = url;
                        link.download = `Bill_${cardNumber || 'new'}_${date}.png`;
                        link.click();
                        URL.revokeObjectURL(url);
                        resolve();
                    });
                });
            };

            const downloadBill = async () => {
                await downloadBillImage();
            };

            // Share Handler (Saves Card Number, Saves to History, AND sends)
            const shareBill = async () => {
                if (!phoneNumber || phoneNumber.length < 10) {
                    alert('10 ‡≤Ö‡≤Ç‡≤ï‡≤ø‡≤Ø ‡≤´‡≥ã‡≤®‡≥ç ‡≤∏‡≤Ç‡≤ñ‡≥ç‡≤Ø‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤Æ‡≥Ç‡≤¶‡≤ø‡≤∏‡≤ø\nPlease enter customer phone number (10 digits)');
                    return;
                }
                if (!cardNumber) {
                     alert('Please enter a Card Number before sharing.');
                     return;
                }
                
                const billData = generateBillData();
                saveBillToHistory(billData); 
                saveCustomerCardNumber(phoneNumber, cardNumber); 

                await downloadBillImage(); 

                let formattedPhone = phoneNumber.replace(/\D/g, '');
                if (formattedPhone.length === 10) {
                    formattedPhone = '91' + formattedPhone;
                }

                const message = `Hi! Your bill from Polo Fashions is ready.\n\nCard No: ${cardNumber}\nDate: ${date}\nReady By: ${readyDate || 'To be Confirmed'}\nTotal: ‚Çπ${calculateTotal()}\nAdvance: ‚Çπ${advance || 0}\nBalance: ‚Çπ${calculateBalance()}\n\nüßæ Your digital Card is generated. Please check it once.`;

                const whatsappUrl = `https://wa.me/${formattedPhone}?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            };

            // Share SMS Handler (Saves Card Number, Saves to History, AND sends)
            const shareSMS = () => {
                if (!phoneNumber || phoneNumber.length < 10) {
                    alert('10 ‡≤Ö‡≤Ç‡≤ï‡≤ø‡≤Ø ‡≤´‡≥ã‡≤®‡≥ç ‡≤∏‡≤Ç‡≤ñ‡≥ç‡≤Ø‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤Æ‡≥Ç‡≤¶‡≤ø‡≤∏‡≤ø\nPlease enter customer phone number (10 digits)');
                    return;
                }
                 if (!cardNumber) {
                     alert('Please enter a Card Number before sharing.');
                     return;
                }

                const billData = generateBillData();
                saveBillToHistory(billData); 
                saveCustomerCardNumber(phoneNumber, cardNumber); 

                let formattedPhone = phoneNumber.replace(/\D/g, '');
                if (formattedPhone.length === 10) {
                    formattedPhone = '+91' + formattedPhone;
                }

                const message = `Hi! Your bill from Polo Fashions is ready.\n\nCard No: ${cardNumber}\nDate: ${date}\nReady By: ${readyDate || 'TBD'}\nTotal: Rs.${calculateTotal()}\nAdvance: Rs.${advance || 0}\nBalance: Rs.${calculateBalance()}\n\nYour digital Card is generated. Please check it once.\n\nPolo Fashions\nMob: 9742445626`;

                const smsUrl = `sms:${formattedPhone}?body=${encodeURIComponent(message)}`;
                window.open(smsUrl, '_self');
            };

            const clearForm = () => {
                setCardNumber('');
                setPhoneNumber('');
                setReadyDate('');
                setDate(new Date().toISOString().split('T')[0]);
                setItems([{ shirts: '', pants: '', amount: '' }]);
                setAdvance('');
            };

            return (
                <div className="app-container">
                    <div className="card">
                        <h1 className="text-3xl font-bold text-center mb-8 text-blue-900 flex items-center justify-center gap-3">
                            <Home size={32} /> Home - New Bill
                        </h1>
                        <button
                            onClick={() => setPage('history')}
                            className="w-full mb-6 bg-purple-600 text-white py-3 px-6 rounded-xl text-lg font-bold hover:bg-purple-700 flex items-center justify-center gap-3"
                        >
                            <Clock size={24} /> View Bill History
                        </button>

                        <div className="space-y-6 mb-8">
                            {/* Card Number */}
                            <div className="bg-blue-50 p-6 rounded-xl border-4 border-blue-500">
                                <label className="block text-2xl font-bold mb-3 text-blue-900">
                                    üìã Card Number
                                </label>
                                <input
                                    type="text"
                                    value={cardNumber}
                                    onChange={(e) => setCardNumber(e.target.value)}
                                    className="w-full text-4xl font-bold p-4 border-4 border-blue-600 rounded-lg text-center"
                                    placeholder="123"
                                />
                            </div>

                            {/* Customer Phone Number with Search Button */}
                            <div className="bg-green-50 p-6 rounded-xl border-4 border-green-500">
                                <label className="block text-2xl font-bold mb-3 text-green-900">
                                    üìû Customer Phone Number
                                </label>
                                <div className="flex gap-2">
                                    <input
                                        type="tel"
                                        value={phoneNumber}
                                        onChange={(e) => setPhoneNumber(e.target.value)}
                                        className="flex-grow text-4xl font-bold p-4 border-4 border-green-600 rounded-lg text-center"
                                        placeholder="9876543210"
                                        maxLength="10"
                                    />
                                    <button
                                        onClick={searchCustomerCard}
                                        className="bg-green-700 text-white p-4 rounded-lg flex flex-col items-center justify-center text-sm hover:bg-green-800"
                                    >
                                        <Search size={24} />
                                        <span>Get Card No.</span>
                                    </button>
                                </div>
                            </div>

                            {/* Date and Ready Date */}
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-xl font-semibold mb-2">üìÖ Order Date</label>
                                    <input
                                        type="date"
                                        value={date}
                                        onChange={(e) => setDate(e.target.value)}
                                        className="w-full text-xl p-3 border-2 border-gray-300 rounded-lg"
                                    />
                                </div>
                                <div>
                                    <label className="block text-xl font-semibold mb-2 text-red-700">üóìÔ∏è Ready/Delivery Date</label>
                                    <input
                                        type="date"
                                        value={readyDate}
                                        onChange={(e) => setReadyDate(e.target.value)}
                                        className="w-full text-xl p-3 border-2 border-red-500 rounded-lg"
                                    />
                                </div>
                            </div>

                            {/* Items */}
                            <div>
                                <div className="flex justify-between items-center mb-4">
                                    <label className="text-xl font-bold">üõçÔ∏è Items</label>
                                    <button
                                        onClick={addItem}
                                        className="bg-green-600 text-white px-6 py-3 rounded-lg text-lg hover:bg-green-700 flex items-center gap-2"
                                    >
                                        <Plus size={24} /> Add Item
                                    </button>
                                </div>

                                {items.map((item, index) => (
                                    <div key={index} className="grid grid-cols-4 gap-3 mb-3 bg-gray-50 p-4 rounded-lg">
                                        <input type="text" value={item.shirts} onChange={(e) => updateItem(index, 'shirts', e.target.value)} className="p-3 border-2 border-gray-300 rounded text-lg" placeholder="Shirts" />
                                        <input type="text" value={item.pants} onChange={(e) => updateItem(index, 'pants', e.target.value)} className="p-3 border-2 border-gray-300 rounded text-lg" placeholder="Pants" />
                                        <input type="number" value={item.amount} onChange={(e) => updateItem(index, 'amount', e.target.value)} className="p-3 border-2 border-gray-300 rounded text-lg font-bold" placeholder="‚Çπ Amount" />
                                        <button onClick={() => removeItem(index)} className="p-3 bg-red-500 text-white rounded hover:bg-red-600 flex items-center justify-center" disabled={items.length === 1}><Trash2 size={20} /></button>
                                    </div>
                                ))}
                            </div>

                            {/* Totals */}
                            <div className="grid grid-cols-3 gap-4">
                                <div className="bg-gray-50 p-4 rounded-lg border-2 border-gray-300">
                                    <label className="block text-lg font-semibold mb-2">Total</label>
                                    <div className="text-3xl font-bold text-gray-800">‚Çπ{calculateTotal().toFixed(0)}</div>
                                </div>
                                <div className="bg-blue-50 p-4 rounded-lg border-2 border-blue-400">
                                    <label className="block text-lg font-semibold mb-2">Advance</label>
                                    <input type="number" value={advance} onChange={(e) => setAdvance(e.target.value)} className="w-full text-2xl font-bold p-2 border-2 border-blue-500 rounded" placeholder="0" />
                                </div>
                                <div className="bg-red-50 p-4 rounded-lg border-2 border-red-400">
                                    <label className="block text-lg font-semibold mb-2">Balance</label>
                                    <div className="text-3xl font-bold text-red-600">‚Çπ{calculateBalance().toFixed(0)}</div>
                                </div>
                            </div>
                        </div>

                        {/* Buttons */}
                        <div className="grid grid-cols-2 gap-4 mb-4">
                            <button onClick={downloadBill} className="flex flex-col items-center justify-center gap-2 bg-blue-600 text-white py-4 px-6 rounded-xl text-lg font-bold hover:bg-blue-700">
                                <Download size={32} /><span>Download</span>
                            </button>
                            <button onClick={clearForm} className="flex flex-col items-center justify-center gap-2 bg-gray-600 text-white py-4 px-6 rounded-xl text-lg font-bold hover:bg-gray-700">
                                <Trash2 size={32} /><span>Clear All</span>
                            </button>
                        </div>
                        <div className="grid grid-cols-2 gap-4">
                            <button onClick={shareBill} className="flex flex-col items-center justify-center gap-2 bg-green-600 text-white py-4 px-6 rounded-xl text-lg font-bold hover:bg-green-700">
                                <Share2 size={32} /><span>Send WhatsApp</span>
                            </button>
                            <button onClick={shareSMS} className="flex flex-col items-center justify-center gap-2 bg-purple-600 text-white py-4 px-6 rounded-xl text-lg font-bold hover:bg-purple-700">
                                <MessageSquare size={32} /><span>Send SMS</span>
                            </button>
                        </div>
                    </div>

                    {/* Bill Preview */}
                    <div className="bill-preview">
                        <h2 className="text-2xl font-bold text-center mb-6 text-gray-700">
                            üëá Bill Preview üëá
                        </h2>
                        <div ref={billRef} className="bg-white p-8 card-bill">
                            <div className="bill-border mb-4 name-card">
                                <div className="text-center">
                                    <div className="text-sm mb-2 text-black">‚úã We are not responsible for stitched cloths after 3 Months</div>
                                    <div className="text-4xl font-bold text-blue-900 mb-2">‡≤™‡≥ã‡≤≤‡≥ã ‡≤´‡≥ç‡≤Ø‡≤æ‡≤∑‡≤®‡≥ç‡≤∏‡≥ç</div>
                                    <div className="text-4xl font-bold my-4 text-blue-900">Card no:
                                        {cardNumber || '___'}
                                    </div>
                                    <div className="text-2xl font-semibold mb-2">Phone: <span className="text-blue-700">{phoneNumber || 'N/A'}</span></div>
                                    <div className="text-2xl font-semibold text-black mb-2">Ready/Delivery Date: <span className="font-bold text-red-600-modified">{readyDate || 'To be Confirmed'}</span></div>
                                    <div className="text-2xl font-semibold mb-2 text-black">Date: {date}</div>
                                </div>
                            </div>

                            <div className="bill-border mb-4 overflow-hidden">
                                <table className="w-full">
                                    <thead className="bg-blue-900 text-white">
                                        <tr>
                                            <th className="p-3 text-left text-lg">Sr.</th>
                                            <th className="p-3 text-center text-lg">SHIRTS</th>
                                            <th className="p-3 text-center text-lg">PANTS</th>
                                            <th className="p-3 text-right text-lg">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {items.map((item, index) => (
                                            <tr key={index} className="border-b-2 border-blue-900">
                                                <td className="p-3 text-lg text-black">{index + 1}</td>
                                                <td className="p-3 text-center text-lg text-black">{item.shirts}</td>
                                                <td className="p-3 text-center text-lg text-black">{item.pants}</td>
                                                <td className="p-3 text-right text-lg font-semibold text-black">{item.amount}</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>

                            <div className="bill-border">
                                <div className="flex justify-between text-2xl font-bold mb-3 text-black">
                                    <span>Total:</span>
                                    <span>‚Çπ{calculateTotal().toFixed(0)}</span>
                                </div>
                                <div className="flex justify-between text-2xl font-bold mb-3 text-black">
                                    <span>Advance:</span>
                                    <span>‚Çπ{advance || '0'}</span>
                                </div>
                                <div className="flex justify-between text-3xl font-bold text-red-600-modified pt-3 border-t-2 border-blue-900">
                                    <span>Balance:</span>
                                    <span>‚Çπ{calculateBalance().toFixed(0)}</span>
                                </div>
                            </div>

                            <div className="mt-6 text-center bill-border address-card">
                                <div className="text-4xl font-bold text-blue-900 mb-2">POLO FASHIONS</div>
                                <div className="text-base text-black">Get Your Dress Ready in as soon as 1‚Äì2 Hours ‚Äì Only at Polo Fashions!</div>
                                <div className="text-base text-black">#GF-30, Anjuman-Eslamiya Complex,</div>
                                <div className="text-base text-black">T.V.S. Road</div>
                                <div className="text-base text-black">Kollegal-571 440</div>
                                <div className="text-lg font-bold mt-2 text-blue-900">Mob: 9742445626</div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }
        
        // --- Main App Component (Routing) ---
        function App() {
            const [page, setPage] = useState('home'); 

            if (page === 'history') {
                return <BillHistory setPage={setPage} />;
            }

            return <PoloFashionsBill setPage={setPage} />;
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>
